<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>
        上传图片
    </title>
    <!--<link href="http://fonts.googleapis.com/css?family=Lato:100,300,400,700" media="all" rel="stylesheet" type="text/css" />-->
    <link href="/stylesheets/bootstrap.min.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/font-awesome.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/se7en-font.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/isotope.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/jquery.fancybox.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/fullcalendar.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/wizard.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/select2.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/morris.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/datatables.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/datepicker.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/timepicker.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/colorpicker.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/bootstrap-switch.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/daterange-picker.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/typeahead.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/summernote.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/pygments.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/style.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/color/green.css" media="all" rel="alternate stylesheet" title="green-theme"
          type="text/css"/>
    <link href="/stylesheets/color/orange.css" media="all" rel="alternate stylesheet" title="orange-theme"
          type="text/css"/>
    <link href="/stylesheets/color/magenta.css" media="all" rel="alternate stylesheet" title="magenta-theme"
          type="text/css"/>
    <link href="/stylesheets/color/gray.css" media="all" rel="alternate stylesheet" title="gray-theme" type="text/css"/>
    <script src="/javascripts/jquery.min.js" type="text/javascript"></script>
    <script src="/javascripts/jquery-ui.js" type="text/javascript"></script>
    <script src="/javascripts/bootstrap.min.js" type="text/javascript"></script>
    <script src="/javascripts/raphael.min.js" type="text/javascript"></script>
    <script src="/javascripts/selectivizr-min.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.mousewheel.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.vmap.min.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.vmap.sampledata.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.vmap.world.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.bootstrap.wizard.js" type="text/javascript"></script>
    <script src="/javascripts/fullcalendar.min.js" type="text/javascript"></script>
    <script src="/javascripts/gcal.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="/javascripts/datatable-editable.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.easy-pie-chart.js" type="text/javascript"></script>
    <script src="/avascripts/excanvas.min.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.isotope.min.js" type="text/javascript"></script>
    <script src="/javascripts/isotope_extras.js" type="text/javascript"></script>
    <script src="/javascripts/modernizr.custom.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.fancybox.pack.js" type="text/javascript"></script>
    <script src="/javascripts/select2.js" type="text/javascript"></script>
    <script src="/javascripts/styleswitcher.js" type="text/javascript"></script>
    <script src="/javascripts/wysiwyg.js" type="text/javascript"></script>
    <script src="/javascripts/summernote.min.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.inputmask.min.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.validate.js" type="text/javascript"></script>
    <script src="/javascripts/bootstrap-fileupload.js" type="text/javascript"></script>
    <script src="/javascripts/bootstrap-datepicker.js" type="text/javascript"></script>
    <script src="/javascripts/bootstrap-timepicker.js" type="text/javascript"></script>
    <script src="/javascripts/bootstrap-colorpicker.js" type="text/javascript"></script>
    <script src="/javascripts/bootstrap-switch.min.js" type="text/javascript"></script>
    <script src="/javascripts/typeahead.js" type="text/javascript"></script>
    <script src="/javascripts/daterange-picker.js" type="text/javascript"></script>
    <script src="/javascripts/date.js" type="text/javascript"></script>
    <script src="/javascripts/morris.min.js" type="text/javascript"></script>
    <script src="/javascripts/skycons.js" type="text/javascript"></script>
    <script src="/javascripts/fitvids.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.sparkline.min.js" type="text/javascript"></script>
    <script src="/javascripts/main.js" type="text/javascript"></script>
    <script src="/javascripts/respond.js" type="text/javascript"></script>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
</head>
<body>
<div class="modal-shiftfix">
    <div class="row">
        <div class="col-lg-12">
            <div class="widget-container fluid-height clearfix">
                <div class="heading">
                </div>
                <div class="alert alert-success" th:unless="${#strings.isEmpty(msg)}">
                    <button class="close" data-dismiss="alert" type="button">&times;</button>
                    <a th:text="${msg}"></a>
                    <div class="badge pull-right">
                    </div>
                </div>

                <div class="widget-content padded">
                    <div class="form-group">
                        <select class="example">
                            <option>选择图片
                            </option>
                            <option th:each="img : ${imgs}" th:data-a="${img.relativeUrl}" th:data-b="${img.url}"
                                    th:data-c="${img.id}">[[${img.relativeUrl}]]
                            </option>
                        </select>
                        <form th:action="@{/test/delete}" method="post">
                            <input name="id" type="hidden" th:value="${id}">
                            <input class="btn btn-primary" type="submit" value="删除图片">
                        </form>
                    </div>

                    <div class="form-group">
                    <form id="formid" th:action="@{/test/test2}" method="post">
                        <input id="path" name="path" type="hidden" value="">
                        <input id="url" name="url" type="hidden" value="">
                        <input  style="display:none;" type="submit"  class="btn btn-success">
                    </form>
                    </div>
                </div>

                <div class="widget-content padded">
                <div class="form-group">

                    <form id="add" th:action="@{/test/test}" method="post" enctype="multipart/form-data">
                        <a name="uploadFile" id="uploadFile" href="javascript:;">[上传文件]</a>
                        <input id="filess" name="file" value="上传图片" type="file" accept="image/*" style="display: none"/>
                        <input  type="submit" class="btn btn-success" style="display: none">
                    </form>

                    <img th:src="@{${imgUrl}}" width="180px">
                    <ul>
                        <li th:text="'红：' + ${img[0]}"></li>
                        <li th:text="'绿：' + ${img[1]}"></li>
                        <li th:text="'蓝：' + ${img[2]}"></li>
                        <li th:text="'青：' + ${img[3]}"></li>
                        <li th:text="'品红：' + ${img[4]}"></li>
                        <li th:text="'黄：' + ${img[5]}"></li>
                        <li th:text="'黑：' + ${img[6]}"></li>
                        <li th:text="'白：' + ${img[7]}"></li>
                    </ul>
                </div>
                    <a th:text="'角度：' + ${angel}"> </a>
                    <div>
                      <img  width="180px" th:each="url : ${imgUrlList}"   th:src="${url}"/>
                    </div>
                    <a th:text="'视觉肌理：' + ${viewRanking}"> </a>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</body>
<script type="text/javascript" th:inline="javascript">

    $('select.example').change(function () {
        document.getElementById("path").value = $("select option:selected").data('b');
        document.getElementById("url").value = $("select option:selected").data('a');
        document.getElementById("formid").submit();
    });

    $("#uploadFile").click(function () {
        const myFile = $("#filess")
        // 触发
        myFile.click()
        // 监听change事件
        myFile.unbind().change(function (e) {
            document.getElementById("add").submit();
        })
    });
</script>

</html>